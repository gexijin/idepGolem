% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils_analysis_random.R
\name{remove_ensembl_version}
\alias{remove_ensembl_version}
\title{Remove version numbers from Ensembl Gene IDs}
\usage{
remove_ensembl_version(ensembl_ids)
}
\arguments{
\item{ensembl_ids}{A character vector of Ensembl Gene IDs with or without
version numbers. Valid IDs follow the pattern ENSG/Ensg/ensg followed by
8-12 digits, optionally ending with a dot and 1-2 digit version number
(e.g., .2, .15). Strings that don't match this pattern are returned
unchanged. Version numbers with 3+ digits (e.g., .100, .333) are NOT
removed. Trailing dots without digits (e.g., "ENSG00000211459.") are removed.}
}
\value{
A character vector of Ensembl Gene IDs without version numbers.
  Valid IDs without versions are returned unchanged. Invalid/non-Ensembl
  strings are returned unchanged. IDs with 3+ digit versions are unchanged.
  Trailing dots are removed. NA values are preserved.
}
\description{
Takes Ensembl Gene IDs with version numbers (e.g., ENSG00000211459.2) and
removes the version suffix to return just the base ID (e.g., ENSG00000211459).
Uses vectorized operations for efficient processing of multiple IDs.
The function uses sub() which is optimized for vector operations, making it
highly efficient even with large datasets (>600,000 IDs per second).
}
\details{
Only removes versions from valid Ensembl Gene IDs that match the pattern:
ENSG/Ensg/ensg followed by 8-12 digits, then a dot and 1-2 digit version number.
Non-matching strings (e.g., "ABC.cded") are returned unchanged. Version
numbers with 3+ digits are NOT removed. Trailing dots without version
numbers (e.g., "ENSG00000211459.") are also removed. The prefix matching is
case-insensitive (accepts ENSG, Ensg, or ensg).
}
\examples{
# Single ID with 1-2 digit version
remove_ensembl_version("ENSG00000211459.2")
# Returns: "ENSG00000211459"

# Case-insensitive prefix matching
remove_ensembl_version(c("ENSG00000211459.2", "Ensg00000123456.10", "ensg00000999999.5"))
# Returns: c("ENSG00000211459", "Ensg00000123456", "ensg00000999999")

# Version with 3+ digits is NOT removed
remove_ensembl_version("ENSG00000222222.333")
# Returns: "ENSG00000222222.333"

# Trailing dot without digits is removed
remove_ensembl_version("ENSG00000211459.")
# Returns: "ENSG00000211459"

# Non-Ensembl strings are left unchanged
remove_ensembl_version(c("ENSG00000211459.2", "ABC.cded", "GENE123.4"))
# Returns: c("ENSG00000211459", "ABC.cded", "GENE123.4")

}
